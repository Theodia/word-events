<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Générateur de feuille dominicale</title>
    <script src="../jQuery/lib/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            $('input[type="radio"]').on("click", function () {
                $('#templateField').val("");
                $('#templateField').removeAttr("name");
            });

            $("#templateField").on("click", function () {
                $('input[type="radio"]').prop('checked', false);
                $('#templateField').attr("name", "templateURL");
            });

            let now = new Date();
            let finalNow;
            if (now.getMonth() + 1 >= 10){
                if (now.getDate() >= 10){
                    finalNow = now.getFullYear() + "-" + (now.getMonth() +1 ) + "-" + now.getDate();
                } else{
                    finalNow = now.getFullYear() + "-" + (now.getMonth() +1 ) + "-0" + now.getDate();
                }

            }else {
                if (now.getDate() >= 10){
                    finalNow = now.getFullYear() + "-0" + (now.getMonth() +1 ) + "-" + now.getDate();
                } else{
                    finalNow = now.getFullYear() + "-0" + (now.getMonth() +1 ) + "-0" + now.getDate();
                }
            }


            let oneWeekAfter = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);
            let finalOneWeekAfter;
            if (oneWeekAfter.getMonth() + 1 >= 10){
                if (oneWeekAfter.getDate() >= 10){
                    finalOneWeekAfter = oneWeekAfter.getFullYear() + "-" + (oneWeekAfter.getMonth() +1 ) + "-" + oneWeekAfter.getDate();
                } else{
                    finalOneWeekAfter = oneWeekAfter.getFullYear() + "-" + (oneWeekAfter.getMonth() +1 ) + "-0" + oneWeekAfter.getDate();
                }

            }else {
                if (now.getDate() >= 10){
                    finalOneWeekAfter = oneWeekAfter.getFullYear() + "-0" + (oneWeekAfter.getMonth() +1 ) + "-" + oneWeekAfter.getDate();
                } else{
                    finalOneWeekAfter = oneWeekAfter.getFullYear() + "-0" + (oneWeekAfter.getMonth() +1 ) + "-0" + oneWeekAfter.getDate();
                }
            }
            $("#dateBegin").val(finalNow);
            $("#dateEnd").val(finalOneWeekAfter);
        }


    </script>
</head>
<body>
    <form action="php/ctrl.php" method="post" target="_blank">
    <h2>Entrez les données à utiliser pour générer la feuille dominicale:</h2>
        <fieldset>
            <legend><b>URLs du contenu externe:</b></legend>

            <label for="calendarMainURL">Calendrier des messes:</label>
                <input name="calendarMainURL" id="calendarMainURL" required type="url" value="https://calendar.google.com/calendar/ical/emf.theodia%40gmail.com/private-e5c4e839e2928a23876e3b0d5ee542fc/basic.ics" size="150">

            <br><br>
            <label for="calendarOtherURL">Calendrier d'autres évènements:</label>
                <input name="calendarOtherURL" id="calendarOtherURL" type="url" size="150" value="https://calendar.google.com/calendar/ical/e4mge4uif1ccseio4hpru47tnk%40group.calendar.google.com/private-0082f110a035a472a0c3c1a2eaa124a2/basic.ics">

            <br><br>
            <label>
                <input name="templateURL" type="radio" value="https://drive.google.com/uc?authuser=0&id=1y3Ez-0OAhKFX-f-6mBqJDQ1r1bXL61pl&export=download">
                Template 1 : https://drive.google.com/uc?authuser=0&id=1y3Ez-0OAhKFX-f-6mBqJDQ1r1bXL61pl&export=download
                </label>
            <br>
            <label>
                <input name="templateURL" type="radio" value="https://drive.google.com/uc?authuser=0&id=1BQCpnjO92UtiiRb88203By4PtbfokRoL&export=download">
                Template 2 : https://drive.google.com/uc?authuser=0&id=1BQCpnjO92UtiiRb88203By4PtbfokRoL&export=download
                </label>
            <br>
            <label>
                <input name="templateURL" type="radio" value="https://drive.google.com/uc?authuser=0&id=17PwDzzlVw5IVweNZwIn9D21XrJBdTiVR&export=download" checked>
                Template 3 : https://drive.google.com/uc?authuser=0&id=17PwDzzlVw5IVweNZwIn9D21XrJBdTiVR&export=download
                </label>
            <br>
            <label>
                Template 4 : <input type="url" size="150" id="templateField">
            </label>
            <br><br>
            <label for="logoURL">Logo:</label>
                <input name="logoURL" id="logoURL" type="url" value="https://www.ministryvoice.com/wp-content/uploads/2018/02/bible-cross-logo.png" size="150">
        </fieldset>

        <br><br>

        <fieldset>
            <legend><b>Fenêtre de lecture des événements:</b></legend>

            <label for="dateBegin">Date de début:</label>
                <input name="dateBegin" id="dateBegin" type="date">

            <br><br>
            <label for="dateEnd">Date de fin:</label>
                <input name="dateEnd" id="dateEnd" type="date">
        </fieldset>

        <br><br>

        <fieldset>
            <legend><b>Informations de l'organisation:</b></legend>

            <label for="organisationName">Nom:</label>
                <input name="organisationName" id="organisationName" type="text" value="Paroisse St-Maurice">

            <br><br>
            <label for="organisationLocation">Ville:</label>
                <input name="organisationLocation" id="organisationLocation" type="text" value="1700 Fribourg">

            <br><br>
            <label for="organisationAddress">Adresse:</label>
                <input name="organisationAddress" id="organisationAddress" type="text" value="Rue Lenda 1">

            <br><br>
            <label for="organisationPhoneNbr">Numéro de téléphone:</label>
                <input name="organisationPhoneNbr" id="organisationPhoneNbr" type="text" value="+41 78 737 83 63">
        </fieldset>

        <br><br>
        <fieldset>
            <legend><b>Format des dates et heure des événements:</b></legend>
            <label for="locales">Langue:</label>
            <select name="locales" id="locales">
                <option value="ar-sa">Arabic - Saudi Arabia</option>
                <option value="zh-cn">Chinese - China</option>
                <option value="nl-nl">Dutch - Netherlands</option>
                <option value="en-us">English - United States</option>
                <option value="fr-ch" selected>French - Switzerland</option>
                <option value="de-de" >German - Germany</option>
                <option value="it-it" >Italian - Italy</option>
                <option value="pl" >Polish</option>
                <option value="pt-pt" >Portuguese - Portugal</option>
                <option value="ru">Russian</option>
                <option value="es-es">Spanish - Spain</option>
            </select>
            <br><br>
            <label for="datePattern">Format des dates:</label>
            <input name="datePattern" id="datePattern" type="text" required value="dd MMMM">
            <br><br>
            <label for="timePattern">Format des heures:</label>
            <input name="timePattern" id="timePattern" type="text" required value="HH:mm">
            <br><br>
            <a href="http://userguide.icu-project.org/formatparse/datetime" target="_blank">Formatting Dates and Times - ICU User Guide (tableau avec symboles de formattage)</a>
        </fieldset>
        <br><br>
        <input type="submit" value="Générer le document">
    </form>
</body>
</html>